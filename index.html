<!DOCTYPE html>
<!-- 
    To customize this page for your own data, open fusiontable_settings.js and follow instructions.
    You should not have to touch this file.
-->

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="apple-touch-icon.png"/>
    <link rel="icon" type="image/png" href="favicon.ico"/>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#333333">
    
    <title>Colegios Cali</title>
    <!-- https://stackoverflow.com/questions/19778620/provide-an-image-for-whatsapp-link-sharing?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa -->
    <meta name="description" content="Instituciones Educativas Oficiales y Establecimientos Educativos Privados contratados con Ampliaci칩n de Cobertura 2018">
    <meta property="og:title" content="Colegios Cali" />
    <meta property="og:url" content="https://establecimientoseducativoscali.000webhostapp.com/" />
    <meta property="og:description" content="Aplicaci칩n para Consulta de Colegios en Cali">
    <meta property="og:image" content="//establecimientoseducativoscali.000webhostapp.com/apple-touch-icon.png">
    <meta property="og:type" content="school" />
    <meta property="og:locale" content="es_CO" />
    <!-- if updating jQueryMobile, please see MOBILE-FUSION-TABLES comments in current version -->
    <link rel="stylesheet" href="source/jquery.mobile-1.3.1.modified.min.css" type="text/css"/>

    <script type="text/javascript" src="source/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="source/jquery.mobile-1.3.1.modified.min.js"></script> <!-- this must come after jquery -->
    <script type="text/javascript" src="source/jquery.address.min.js"></script>
    <!-- Se requiere que se coloque el API key de Google Maps -->
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?key={API_KEY_GOOGLE_MAPS}&amp;libraries=places,geometry&amp;v=3.37"></script>

    <script type="text/javascript" src="source/maps_lib.js?V=0"></script>
    <script type="text/javascript" src="fusiontable_settings.js?V=1"></script>

    <style type="text/css">
    	
        .infobox-container {
            overflow:hidden;
            position:relative;
            font-weight:normal;
            overflow:auto;
        }

        .infobox-default {
            display:inline;
            font-family: Arial, Helvetica, Geneva, sans-serif;
            white-space:normal;
        }

        /* using hr as spacer between search fields */
        hr { 
            display: block; height: 8px;
            border: 0; margin: 0; padding: 0;
        }

        #map_content {
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        #map_canvas {
            padding: 0;
            text-shadow: none;
        }

        #black {
            background-color: #000;
        }
        
        /* custom icons */
        .ui-icon-location {
            background-image: url(source/images/icons-18-white-location.png);
            background-repeat: no-repeat;
        }
        .ui-icon-blackLocation {
            background-image: url(source/images/icons-18-black-location.png);
            background-repeat: no-repeat;
            background-color: silver;
        }
    </style>
</head>

<body id="black">
    <!-- Home -->

    <div data-role="page" id="page-map">
        <div data-theme="a" data-role="header">
    <!-- About button -->
            <a id="about" data-role="button" href=
            "#page-about" data-icon="info" data-iconpos="left" class=
            "ui-btn-left">Acerca de</a>
    <!-- Search button -->
    	<a data-role="button" id="search_page"
            href="#page-search" data-icon=
            "search" data-iconpos="right" class="ui-btn-right">Filtrar</a>
            <h3><span id="titlebar">&nbsp;</span></h3>
        </div>

    <!-- Bounds Exceeded popup message -->
        <div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c"
         style="max-width:400px;" class="ui-corner-all">
            <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                <p id="alertMessageText"></p> 
                <a href="#page-map" id="alertMessageClose" data-role="button">Aceptar</a>    
            </div>
        </div>

    <!-- The Map -->
        <div data-role="content" id="map_content" style="">
            <div id="map_canvas" style=
            "position:absolute;top:42px;bottom:42px;left:0px;right:0px;">
            </div>
        </div>

    <!-- Nearby button -->
        <div data-theme="a" data-role="footer" data-position="fixed"
        style="height:42px">
            <a id="nearby" data-role="button" href="#nearby" data-icon=
            "location" data-iconpos="left" class="ui-btn-left">
            <span id="nearby-name">Ubicaci칩n</span></a>

    <!-- List button -->
            <a data-role="button" href="#page-list" data-icon="bars" id=
            "list_button" data-iconpos="right"
            class="ui-btn-right">Lista</a>
        </div>
    </div>

    <!-- About view -->
    <div data-role="page" id="page-about">
        <div data-theme="a" data-role="header">
            <a data-role="button" data-icon="arrow-l" data-iconpos=
            "left" href="#page-map" class="ui-btn-left" id="about_back">Atr&aacute;s</a>

            <h3>Acerca de</h3>
        </div>

        <div data-role="content" id="section-about">
        </div>
        <div data-role="content" id="section-config">
        	<h3>Capas de Mapas</h3>
        	<p>Fuente: <a target="_blank" href="http://idesc.cali.gov.co" >Cat치logo del IDESC</a></p>
        	<input type="checkbox" id="check_capa_comunas"/>
        	<label for="check_capa_comunas" >Mostrar Capa de Comunas</label>
        	<input type="checkbox" id="check_capa_barrios"/>
        	<label for="check_capa_barrios" >Mostrar Capa de Barrios</label>
        	<input type="checkbox" id="check_capa_centros_poblados"/>
        	<label for="check_capa_centros_poblados" >Mostrar Capa de Centros Poblados (2014)</label>
        </div>
    </div>

    <!-- List view -->
    <div data-role="page" id="page-list">
        <div data-theme="a" data-role="header">
            <a data-role="button" href="#page-map"
            data-icon="arrow-l" data-iconpos="left" class=
            "ui-btn-left" id="list_back">Atr&aacute;s</a>

            <h3>Lista</h3>
        </div>

        <div data-role="content">
        	<div id="total" style="height: 28pt;margin-top: -14pt">Cantidad total</div>
            <ul data-role="listview" id="listview" data-divider-theme=""
            data-inset="false">
                <li data-theme="c">Cargando resultados...</li>
            </ul>
        </div>
    </div>

    <!-- Search dialog -->
    <div data-role="page" id="page-search">
        <div data-theme="a" data-role="header">
            <a data-role="button" href="#page-map"
            data-icon="arrow-l" data-iconpos="left" class=
            "ui-btn-left" id="search_back">Atr&aacute;s</a>

            <a data-role="button" href="#page-map"
            data-icon="arrow-r" data-iconpos="right" class=
            "ui-btn-right" id="search_top">Filtrar</a>
            <h3>Filtrar</h3>
        </div>

        <div data-role="content">
            <div id="section-search" data-role="fieldcontain"></div>
            <button class="btn" id="search_reset" data-theme="r">Borrar</button>
            <button class="btn" id="search" data-theme="b">Filtrar</button>
        </div>
    </div>
    
    <!-- Locator view -->
    <div data-role="page" id="page-locator">
        <div data-theme="a" data-role="header">
            <a data-role="button" data-icon="arrow-l" data-iconpos=
            "left" href="#page-search" class="ui-btn-left" id="locator_back">Atr&aacute;s</a>
			<a data-role="button" href="#page-search"
            data-icon="arrow-r" data-iconpos="right" class=
            "ui-btn-right" id="selection">Seleccionar</a>
            <h3>Selecciona sobre el mapa</h3>
        </div>

        <div data-role="content" id="map_locator_content" style="">
            <div id="map_locator_canvas" style=
            "position:absolute;top:42px;bottom:0px;left:0px;right:0px;">
            </div>
        </div>
    </div>
    

    <script type="text/javascript">
    $(function() {
        MapsLib.initialize();
        MapsLib.setLayerVisibility([]);

        $("#about").click(function() { MapsLib.onExitMap(); });
        $("#search_page").click(function() { MapsLib.onExitMap(); });
        $("#list_button").click(function(){
            MapsLib.onExitMap();
            MapsLib.getListView();
        });

        $("#about_back").click(function() { MapsLib.onEnterMap(); });
        $("#search_back").click(function() { MapsLib.onEnterMap(); });
        $("#list_back").click(function() { MapsLib.onEnterMap(); });

        $("#search").click(function(){
            MapsLib.onEnterMap();
            MapsLib.doSearch();
        });
        $("#search_top").click(function(){
            MapsLib.onEnterMap();
            MapsLib.doSearch();
        });
        $("#search_reset").click(function(){
            MapsLib.resetSearch();
        });
        window.addEventListener('popstate', function(e) { 
            MapsLib.onPopState();
        });
        
        //Custom
        $("#check_capa_comunas").click(function() {MapsLib.changeLayers();});
        $("#check_capa_barrios").click(function() {MapsLib.changeLayers()});
        $("#check_capa_centros_poblados").click(function() {MapsLib.changeLayers()});
        
        $("#selection").click(function(e) {return MapsLib.doLocationSelector();});
    });
	$(document).ready(function () {
		var elements = $("div").filter(function() {
		  return $(this).css("z-index") == "9999999";
		});
		elements.removeAttr("style");
		//elements.css("display", "none");
		elements.css("position", "fixed");
		elements.css("z-index", "99999");
		elements.css("bottom", "0px");
		elements.css("left", "50%");
		elements.css("margin-left", "-113.5px");
	});
	// https://stackoverflow.com/questions/34369951/how-to-get-add-to-home-screen-pop-up-on-site-open-in-mobile-browser?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa
	// https://developers.google.com/web/fundamentals/app-install-banners/
	// https://blog.betapage.co/how-to-add-add-to-homescreen-popup-in-web-app-99d5237fabff
	// https://developers.google.com/web/tools/chrome-devtools/progressive-web-apps#add-to-homescreen
	if ('serviceWorker' in navigator) {
	console.log("Will the service worker register?");
	navigator.serviceWorker.register('service-worker.js')
	  .then(function(reg){
		console.log("Yes, it did.");
	 }).catch(function(err) {
		console.log("No it didn't. This happened:", err)
	});
	}
	</script>
</body>
</html>
